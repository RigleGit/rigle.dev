(function(){function t(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}const e=document.getElementById("packForm"),n=document.getElementById("packBtn"),o=document.getElementById("modalPackError"),a=document.getElementById("modalPackErrorMsg");e.addEventListener("submit",async r=>{r.preventDefault();const c=new FormData(e),d=(c.get("name")||"").toString().trim(),i=(c.get("email")||"").toString().trim(),l=(c.get("packId")||"c100").toString().trim();if(!t(i))return a.textContent="Introduce un correo válido.",void(o.style.display="flex");n.disabled=!0,n.textContent="Enviando…";try{const t=await fetch("/api/send-pack",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:d,email:i,packId:l})}),e=await t.json().catch(()=>null);if(e&&e.ok)return void(window.location.href="/c100/gracias/index.html");a.textContent="Hubo un problema enviando el pack. Inténtalo más tarde.",o.style.display="flex"}catch(t){a.textContent="Error de red. Inténtalo de nuevo en unos minutos.",o.style.display="flex"}finally{n.disabled=!1,n.textContent="Quiero el pack"}});const r=new URLSearchParams(location.search),c=document.getElementById("source");c&&(c.value=r.get("utm_content")||"c100_pack")})();